from kodi_six import xbmcaddon

ONLY_CLIENT = False
JSONRPC_EXT_PORT = 65221
ELEMENTUMD_HOST = "http://127.0.0.1:65220"
PROXY_ENABLED = False
PROXY_SETTINGS = {}

def init():
    global ELEMENTUMD_HOST
    global JSONRPC_EXT_PORT
    global ONLY_CLIENT
    global PROXY_ENABLED

    ADDON = xbmcaddon.Addon("plugin.video.elementum")

    try:
        ELEMENTUMD_HOST = "http://" + ADDON.getSetting("remote_host") + ":" + ADDON.getSetting("remote_port")
        JSONRPC_EXT_PORT = int(ADDON.getSetting("local_port"))
        ONLY_CLIENT = ADDON.getSetting("local_only_client") == u"true"
        PROXY_ENABLED = ADDON.getSetting("proxy_enabled") == u"true"
        if PROXY_ENABLED:
            proxy_type_mapping = {
                "0": "socks4",
                "1": "socks5",
                "2": "http",
                "3": "i2p",
            }
            PROXY_SETTINGS["proxy_type"] = proxy_type_mapping.get(ADDON.getSetting("proxy_type"), "http")

            PROXY_SETTINGS["proxy_host"] = ADDON.getSetting("proxy_host")
            PROXY_SETTINGS["proxy_port"] = ADDON.getSetting("proxy_port")
            PROXY_SETTINGS["proxy_login"] = ADDON.getSetting("proxy_login")
            PROXY_SETTINGS["proxy_password"] = ADDON.getSetting("proxy_password")
    except:
        pass


init()
